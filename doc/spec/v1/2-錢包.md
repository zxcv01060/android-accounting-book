# 錢包

[上一篇 - 記帳記錄](1-記帳記錄.md) | [下一篇 - 週期記帳](3-週期記帳.md)

> 預計實現版本：v1.1

## 功能介紹
---

此功能為管理使用者的所有錢包，例如現金、銀行帳戶、悠遊卡等等，藉此來得知每個錢包的收支情況

由於記帳記錄會需要錢包才可以新增的緣故，預設會有一個名為"現金"的錢包，此錢包不可刪除、不可編輯名稱

除此之外，也可以設定預設錢包(最多一個)，預設錢包會固定排在最上面供使用者確認主要使用的錢包餘額

## 畫面

### 清單

使用者可以在此查看所有已新增的錢包，預設會按照餘額遞減排序，亦可透過排序按鈕來切換排序，每個錢包皆會顯示名稱以及當前餘額

#### 欄位說明

(Figma截圖)

| 欄位      | 預設值 | 提示      | 備註                                  |
|---------|-----|---------|-------------------------------------|
| 錢包名稱    |     |         |                                     |
| 餘額      |     |         | 無論是收入或支出，皆不顯示正負符號，且文字顏色需符合收入、支出的顏色  |
| 星星icon  |     | 設定為預設錢包 | 若非預設錢包，則顯示中空的星星符號；若為預設錢包，則顯示填滿的星星符號 |
| 垃圾桶icon |     | 刪除      | 若為預設錢包，則不顯示此按鈕                      |

#### 事件流程

| 事件                 | 反應                                                                            |
|--------------------|-------------------------------------------------------------------------------|
| 點擊任意錢包             | 開啟詳細頁面                                                                        |
| 點擊星星icon           | 若該錢包已是預設錢包，則不會有任何動作；若否，將當前錢包設定為預設，並顯示成功或失敗訊息，此操作成功後不會改變排序，依然讓進入此畫面時的預設錢包排在最前面 |
| 點擊垃圾桶icon          | 顯示確認Dialog詢問是否確定刪除錢包                                                          |
| 點擊手機自帶的返回按鈕或自帶的上一頁 | 顯示提示訊息："再一次離開應用程式"，在五秒內再次執行此事件，則將應用程式關閉                                       |

#### 事件流程

### 刪除錢包的確認Dialog

(Figma截圖)

此為避免使用者誤觸刪除，因此在點擊刪除後需顯示此Dialog供使用者確認，*號處需以自動帶入錢包名稱

#### 事件流程

| 事件                 | 反應                                                                                     |
|--------------------|----------------------------------------------------------------------------------------|
| 點擊確認按鈕             | 關閉Dialog，並檢查是否有記帳記錄設定為此錢包，若有，則另外顯示Dialog讓使用者選擇這些記錄要變更為哪個錢包；若無，則顯示刪除成功的提示訊息，並將該錢包從畫面中移除 |
| 點擊取消按鈕             | 關閉Dialog                                                                               |
| 點擊手機自帶的返回按鈕或自帶的上一頁 | 視同點擊取消按鈕                                                                               |

### 刪除後的選擇替代錢包的Dialog

由於記帳記錄的錢包欄位為必填，因此當此錢包已新增過記帳記錄時，需要將這些記帳記錄的錢包欄位設定為另外一個欄位，下拉選單的內容為所有錢包的名稱，需排除當前要刪除的錢包

又或者是乾脆將此錢包下的所有記帳記錄一併刪除，因此也會有Radio Button供使用者選擇要哪種方案

#### 欄位說明

(Figma截圖)

| 欄位       | 預設值 | 提示   | 限制 | 預計實現版本 | 備註                                                         |
|----------|-----|------|----|--------|------------------------------------------------------------|
| 選擇替代錢包   | 選取  |      |    |        |                                                            |
| 刪除所有記帳記錄 |     |      |    |        |                                                            |
| 錢包       |     | 選擇錢包 | 必填 |        | 選取"選擇替代錢包"時才顯示，下拉選單的選項先顯示預設錢包，其餘錢包按照名稱遞增排序放在後面，需排除當前要刪除的錢包 |
| 確認       |     |      |    |        | 若選取"選擇替代錢包"時，若未選擇錢包的話，Disable此按鈕                           |
| 取消       |     |      |    |        |                                                            |

#### 事件流程

| 事件                 | 反應                                                                                                                                                         |
|--------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 選取"選擇替代錢包"         | 顯示錢包的下拉選單                                                                                                                                                  |
| 選取"刪除所有記帳記錄"       | 隱藏錢包的下拉選單                                                                                                                                                  |
| 點擊確認按鈕             | 若選取"選擇替代錢包"，則將欲刪除的錢包下的所有記帳記錄更新為所選錢包，接著將此錢包刪除，並在成功時顯示"刪除成功"；失敗時以另外一個Dialog顯示錯誤訊息。若選取"刪除所有記帳記錄"，則將此錢包下的所有記帳記錄刪除，接著才將此錢包刪除，並在成功時顯示"刪除成功"；失敗時以另外一個Dialog顯示錯誤訊息 |
| 點擊取消按鈕             | 關閉此Dialog                                                                                                                                                  |
| 點擊手機自帶的返回按鈕或自帶的上一頁 | 視同點擊取消按鈕                                                                                                                                                   |

### 詳細頁面

此頁面會將所選錢包的詳細資訊全數列出，同時，底下會一併將此錢包最近五筆記帳記錄顯示出來，藉此讓使用者得知此錢包最近的使用情況

除此之外，使用者也可以藉由點擊"查看全部"來一次性查看此錢包的所有記帳記錄

#### 欄位說明

| 欄位     | 預設值 | 提示      | 限制 | 預計實現版本 | 備註                                  |
|--------|-----|---------|----|--------|-------------------------------------|
| 名稱     |     |         |    |        |                                     |
| 餘額     |     |         |    |        |                                     |
| 記帳記錄   |     |         |    |        | 顯示最近新增的五筆記帳記錄                       |
| 查看全部   |     |         |    |        |                                     |
| 星星icon |     | 設定為預設錢包 |    |        | 若非預設錢包，則顯示中空的星星符號；若為預設錢包，則顯示填滿的星星符號 |
| 編輯icon |     | 編輯      |    |        |                                     |
| 返回     |     | 返回      |    |        |                                     |

#### 事件流程

| 事件                 | 反應                                                                            |
|--------------------|-------------------------------------------------------------------------------|
| 點擊查看全部按鈕           | 顯示錢包的下拉選單                                                                     |
| 點擊星星icon           | 若該錢包已是預設錢包，則不會有任何動作；若否，將當前錢包設定為預設，並顯示成功或失敗訊息，此操作成功後不會改變排序，依然讓進入此畫面時的預設錢包排在最前面 |
| 點擊編輯icon           | 顯示新增、編輯頁面，並將此錢包的資料帶入                                                          |
| 點擊返回按鈕             | 回到上一個畫面，若有變動過預設錢包，則依然維持進入前的排序，但需更新預設錢包的icon顯示                                 |
| 點擊手機自帶的返回按鈕或自帶的上一頁 | 視同點擊返回按鈕                                                                      |

### 新增、編輯頁面

此頁面可以新增或編輯錢包的基本資料，若為新增，則可以額外設定此錢包的初始餘額，並且也可以在此畫面選擇是否將此錢包設定為預設錢包

#### 欄位說明

(Figma截圖)

| 欄位      | 預設值 | 提示 | 限制          | 預計實現版本 | 備註                               |
|---------|-----|----|-------------|--------|----------------------------------|
| 名稱      |     |    | 必填，最多10個全形字 |        | 不可重複                             |
| 初始餘額    |     |    |             |        |                                  |
| 設定為預設錢包 | 不勾選 |    |             |        |                                  |
| 預設錢包    |     |    |             |        | 將預設錢包的名稱顯示出來                     |
| 確認      |     |    |             |        | 若勾選"選擇替代錢包"時，若未選擇錢包的話，Disable此按鈕 |
| 取消      |     |    |             |        |                                  |

#### 事件流程

| 事件                 | 反應                    |
|--------------------|-----------------------|
| Focus初始餘額欄位        | 將輸入框內的千分位移除           |
| 取消Focus初始餘額欄位      | 輸入框內加上千分位顯示           |
| 點擊確認按鈕             | 新增或儲存異動，並顯示"儲存成功"提示文字 |
| 點擊取消按鈕             | 顯示取消的確認Dialog         |
| 點擊手機自帶的返回按鈕或自帶的上一頁 | 視同點擊取消按鈕              |

### 取消的確認Dialog

此Dialog為避免使用者誤觸取消按鈕或上一頁導致先前輸入的資料消失的情況

#### 事件流程

| 事件                 | 反應        |
|--------------------|-----------|
| 點擊確認按鈕             | 回到上一頁     |
| 點擊取消按鈕             | 關閉此Dialog |
| 點擊手機自帶的返回按鈕或自帶的上一頁 | 視同點擊取消按鈕  |

## 相關功能
---

[上一篇 - 記帳記錄](1-記帳記錄.md) | [下一篇 - 週期記帳](3-週期記帳.md)

## 異動紀錄
---

## 異動紀錄
---

* 2025/04/25 初版
